[{"id":"baf0139c.3de55","type":"template","z":"ed4c4d37.b2b858","name":"UI 1","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, shrink-to-fit=no\">\n    <title>\n\t  Q&A Chatbot\n\t</title>\n<link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css\" integrity=\"sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb\" crossorigin=\"anonymous\">\n<script src=\"https://code.jquery.com/jquery-3.2.1.slim.min.js\" integrity=\"sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js\" integrity=\"sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh\" crossorigin=\"anonymous\"></script>\n<script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js\" integrity=\"sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ\" crossorigin=\"anonymous\"></script>     \n  </head>\n  <style>\n  .Bot{\n  \tcolor: Blue;\n  \tfont-style: Bold;\n  }\n  .You{\n  \tcolor: Black;\n  \tfont-style: Bold;\n  }\n  .chat-messages{\n  \tpadding:15px 5px 15px 15px; \n  \tborder:0.25px solid grey;\n  \tbackground-color:#e8f0ff;\n  \twidth:70%;\n  }\n  .input{\n  \twidth: 90%;\n  \tborder: 0.2px solid grey;\n  \theight: 35px; \n  \t \t\n  }\n .input-button{\n \tmargin-top:-5px;\n }\n .input-row{\n \t\n }\n\t\n  </style>\n  <body >\n  \t\t<div class=\"container\" style=\"background-color: black; color:white;\">&nbsp;</div>\n  \t\t<div class=\"container\">\n            <h1><b><br/>Q&A Chatbot</b></h1>\n            <p style=\"font-style: italic;\">My Name is Watson and I can help you with Application Information questions specific to BCBSMN.<br>\n            I can answer 'What is' questions. Try asking one ! </p><br>\n            <div id=\"id_contextdump\"></div>\n            <div class=\"chat-messages\">\n            <div id=id_botchathistory class=\"myLocalDiv\"></div>\n             <form name=\"cpabot\" onsubmit=\"return false\"> \n            \t<div class=\"myLocalDiv\"  onKeyPress=\"javascript:onChatClick(event)\"> \n            \t\t<div class=\"input-row\">   \t                          \n                    <input class=\"input\" type=\"text\" name=\"chattext\" id=\"id_chattext\" placeholder=\"Type your Input and press Enter or 'Send' button\">\n                    <button type=\"button\" class=\"btn btn-dark input-button\" onclick=\"javascript:onChatClick1()\">Send</button>\n                    </div>\n            \t</div>\n             </form>\n             </div>\n\n        </div>\n        \n\n    <script type=\"text/javascript\" src=\"https://code.jquery.com/jquery-2.1.4.min.js\"></script>\n    <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\"></script>\n\n    <script type=\"text/javascript\">\n\n      $(document).ready(function() {\n          javascriptCheck();\n          \t$('#id_contextdump').hide();\n      });\n\n      // if javascript is enabled on the browser then can\n      // remove the warning message\n      function javascriptCheck() {\n        $('#no-script').remove();\n      }\n\n        function myFunction(e) {\n            if((e && e.keyCode == 13) || e == 0) {\n                //alert(\"The form was submitted\");\n                var txt = document.forms.cpabot.fname.value;\n                alert(txt);\n                chat('You', txt);\n                invokeAjax(txt);\n                //document.forms.cpabot.submit();\n                document.forms.cpabot.fname.value = \"\"; // could be form01.reset as well\n            }\n        }   \n\n\n      function createNewDiv(who, message) {\n        var txt = who + ' : ' + message;\n        return $('<div class=\"'+who+'\"></div>').text(txt);\t\n      }\n\n      function chat(person, txt) {\n        $('#id_botchathistory').append(createNewDiv(person, txt));\n      }    \n\n\n\n      function processOK(response) {\n        console.log(response);\n        console.log(response.botresponse.messageout);\n        console.log(response.botresponse.messageout.output.text);\n        console.log(response.botresponse.messageout.context);\n        chat('Bot', response.botresponse.messageout.output.text);\n        $('#id_contextdump').data('convContext', response.botresponse.messageout.context);\n      }\n\n      function processNotOK() {\n        chat('Error', 'Error whilst attempting to talk to Bot');\n      }\n\n      function invokeAjax(message) {\n        var contextdata = $('#id_contextdump').data('convContext');\n        console.log('checking stashed context data');\n        console.log(contextdata);\n\n\n        //var ajaxData = \"msgdata=\" + message;\n        var ajaxData = {};\n        ajaxData.msgdata = message;\n        if (contextdata) {\n          ajaxData.context = contextdata;    \n        }\n\n        $.ajax({\n          type: 'POST',\n          url: 'botchat',\n          data: ajaxData,\n          success: processOK,\n          error: processNotOK\n        });\n      }\n\n      // User has entered some text.\n      function onChatClick(e) {\n        if((e && e.keyCode == 13) || e == 0) {\n            var txt = $('#id_chattext').val();\n            chat('You', txt);\n            $('#id_chattext').val(\"\");\n            invokeAjax(txt);\n        }\n      }\n      function onChatClick1() {\n            var txt = $('#id_chattext').val();\n            chat('You', txt);\n            $('#id_chattext').val(\"\");\n            invokeAjax(txt);\n      }\n      \n      /*// User has entered some text.\n      function askBot() {\n        var txt = $('#id_chattext').val();\n        chat('You', txt);\n        invokeAjax(txt);\n      }*/\n    </script>\n \n  </body>\n</html>","output":"str","x":814.7000312805176,"y":491.4000129699707,"wires":[["f376a2fd.542f68"]]}]